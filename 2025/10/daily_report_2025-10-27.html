<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>自媒体糕校日报 2025-10-27</title>
    
    <!-- SEO 元数据 -->
    <meta name="description" content="自媒体糕校日报 2025年10月27日 - 深入探讨后疫情时代个人防疫哲学、知识付费定价策略、育儿难题“抱睡”的解决思路，以及黄金消费新逻辑等。">
    <meta name="keywords" content="自媒体,糕校日报,可持续防疫,知识付费,定价策略,育儿咨询,消费心理,黄金首饰">
    <meta name="author" content="自媒体糕校">
    
    <!-- Open Graph / 社交媒体分享标签 -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="自媒体糕校日报 2025-10-27">
    <meta property="og:description" content="深入探讨后疫情时代个人防疫哲学、知识付费定价策略、育儿难题“抱睡”的解决思路，以及黄金消费新逻辑等。">
    <meta property="og:site_name" content="自媒体糕校">
    <meta property="og:locale" content="zh_CN">
    
    <!-- Twitter Card 标签 -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="自媒体糕校日报 2025-10-27">
    <meta name="twitter:description" content="深入探讨后疫情时代个人防疫哲学、知识付费定价策略、育儿难题“抱睡”的解决思路，以及黄金消费新逻辑等。">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6C9T7FPDT2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6C9T7FPDT2');
    </script>
    
    <!-- 深色模式预加载脚本 - 终极防闪烁方案 -->
    <script>
        // 在DOM解析前立即执行，最大程度避免闪烁
        (function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                // 方案1：为html元素添加类
                document.documentElement.classList.add('dark-mode-preload');
                
                // 方案2：直接设置body的内联样式（更早生效）
                const style = document.createElement('style');
                style.textContent = `
                    html, body { background-color: #1a1a1a !important; color: #e5e5e5 !important; }
                `;
                document.head.appendChild(style);
            }
        })();
    </script>
    
    <!-- 正常标题格式应为：群聊日报 yyyy-mm-dd，以便外部链接查看时了解日报日期 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

        * {
            font-family: 'Inter', ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        }

        body {
            background-color: #ffffff;
            color: #000000;
        }

        .bento-card {
            background-color: #ffffff;
            border: 1px solid #e9e9eb;
            border-radius: 1rem; /* 16px */
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.07), 0 2px 4px -2px rgba(0,0,0,0.05);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .bento-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.07), 0 4px 6px -4px rgba(0,0,0,0.05);
            transform: translateY(-3px);
        }

        .number-display {
            font-weight: 900; /* black */
            font-size: 4rem;
            line-height: 1;
            /* Color will be set by Tailwind, e.g., text-[#4D6BFE] or text-black */
        }

        .section-title {
            font-weight: 800; /* extrabold */
            font-size: 2.25rem; /* 36px */
            color: #000000;
            margin-bottom: 2rem; /* 32px, consistent with Tailwind mb-8 */
            white-space: nowrap; /* 防止标题换行 */
        }

        /* 手机端响应式调整 */
        @media (max-width: 640px) {
            .section-title {
                font-size: 1.5rem; /* 24px，手机上使用更小的字体 */
                margin-bottom: 1.5rem;
            }
            
            /* 大数字显示在手机上缩小 */
            .number-display {
                font-size: 3rem; /* 手机上从64px缩小到48px */
            }
            
            /* 卡片内边距在手机上缩小，节省空间 */
            .bento-card.p-8 {
                padding: 1.25rem !important; /* 从32px缩小到20px */
            }
            
            .bento-card.p-6 {
                padding: 1rem !important; /* 从24px缩小到16px */
            }
            
            .bento-card.p-5 {
                padding: 0.875rem !important; /* 从20px缩小到14px */
            }
            
            /* 主标题在手机上缩小 */
            h1.text-5xl {
                font-size: 2rem !important; /* 从48px缩小到32px */
                margin-bottom: 1.25rem !important;
            }
            
            /* 话题标题在手机上缩小 */
            h4.text-xl {
                font-size: 1.125rem !important; /* 从20px缩小到18px */
            }
            
            /* 总消息数量文字在手机上缩小 */
            p.text-xl {
                font-size: 1rem !important; /* 从20px缩小到16px */
            }
        }

        .tag-item {
            background-color: rgba(236, 72, 153, 0.10); /* pink-500 @ 10% */
            color: #EC4899; /* pink-500 */
            padding: 0.25rem 0.75rem; /* py-1 px-3 */
            border-radius: 9999px; /* rounded-full */
            font-size: 0.75rem; /* text-xs */
            font-weight: 500; /* medium */
        }


        /* HTML注释: 展开功能相关样式 */
        .expandable-content {
            position: relative;
        }

        .content-preview.collapsed {
            max-height: 11rem; /* 控制预览高度，结合渐变遮罩更紧凑 */
            overflow: hidden;
            position: relative;
        }

        .content-preview.collapsed::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 30px;
            background: linear-gradient(transparent, rgba(255, 255, 255, 0.9));
            pointer-events: none;
        }

        /* 收起态样式优化：收紧段间距，弱化多余换行，避免空白过大 */
        .content-preview.collapsed p,
        .content-preview.collapsed ul,
        .content-preview.collapsed ol,
        .content-preview.collapsed li,
        .content-preview.collapsed h1,
        .content-preview.collapsed h2,
        .content-preview.collapsed h3,
        .content-preview.collapsed h4,
        .content-preview.collapsed h5,
        .content-preview.collapsed h6 {
            margin-top: 0.25rem !important;
            margin-bottom: 0.25rem !important;
            line-height: 1.5 !important;
        }
        /* 多重 <br> 在收起态容易拉大间距，这里统一弱化 */
        .content-preview.collapsed br {
            display: none;
        }
        /* 允许小标题<b>后的首个换行保留，确保分行 */
        .content-preview.collapsed b + br {
            display: inline;
        }

        .expand-btn {
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            background: none;
            padding: 0;
        }

        .expand-btn:hover {
            transform: translateY(-1px);
        }

        .expand-icon {
            transition: transform 0.3s ease;
        }

        .expand-btn.expanded .expand-icon {
            transform: rotate(180deg);
        }

        /* === 粉色主题统一样式 === */
        /* 蓝色元素统一替换为粉色 */
        .text-\[\#4D6BFE\] { color: #EC4899 !important; }              /* pink-500 */
        .border-\[\#4D6BFE\] { border-color: #EC4899 !important; }
        .border-\[\#93c5fd\] { border-color: #F9A8D4 !important; }    /* pink-300 */
        
        /* 渐变色统一为粉色 */
        .from-\[\#4D6BFE\]\/20 { --tw-gradient-from: rgb(236 72 153 / 0.20) !important; }
        .via-\[\#4D6BFE\]\/10 { --tw-gradient-stops: var(--tw-gradient-from), rgb(236 72 153 / 0.10), var(--tw-gradient-to) !important; }
        .to-\[\#4D6BFE\]\/5 { --tw-gradient-to: rgb(236 72 153 / 0.05) !important; }

        /* 紫色块（爬楼关键词）替换为粉色 */
        .bg-purple-50   { background-color: #FDF2F8 !important; }     /* pink-50 */
        .border-purple-200 { border-color: #FBCFE8 !important; }      /* pink-200 */
        .text-purple-700   { color: #BE185D !important; }             /* pink-700 */
        .text-purple-600   { color: #DB2777 !important; }             /* pink-600 */
        
        /* 交互与背景色 */
        .hover\:text-blue-700:hover { color: #BE185D !important; }
        .bg-blue-50 { background-color: #FDF2F8 !important; }

        /* === 新增功能样式 === */
        
        /* 目录导航样式 */
        .toc-container {
            position: sticky;
            top: 20px;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }
        
        .toc-toggle {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .toc-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .toc-content.active {
            max-height: 600px;
        }
        
        .toc-link {
            display: block;
            padding: 0.5rem 0.75rem;
            color: #6b7280;
            text-decoration: none;
            font-size: 0.875rem;
            transition: all 0.2s ease;
            border-left: 2px solid transparent;
        }
        
        .toc-link:hover {
            color: #EC4899;
            background-color: #FDF2F8;
            border-left-color: #EC4899;
        }
        
        .toc-link.active {
            color: #EC4899;
            font-weight: 600;
            border-left-color: #EC4899;
            background-color: #FDF2F8;
        }
        
        /* 返回顶部按钮样式 */
        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 3rem;
            height: 3rem;
            background: #EC4899;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3);
            z-index: 1000;
        }
        
        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }
        
        .back-to-top:hover {
            background: #DB2777;
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(236, 72, 153, 0.4);
        }
        
        /* 复制按钮样式 */
        .copy-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.5rem;
            background: transparent;
            color: #EC4899;
            border: 1px solid #EC4899;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .copy-btn:hover {
            background: #EC4899;
            color: white;
        }
        
        .copy-btn.copied {
            background: #10b981;
            border-color: #10b981;
            color: white;
        }
        
        /* 暗色模式样式 */
        /* 预加载类：在JavaScript执行前就应用深色模式 */
        html.dark-mode-preload,
        html.dark-mode-preload body,
        body.dark-mode {
            background-color: #1a1a1a;
            color: #e5e5e5;
        }
        
        html.dark-mode-preload .bento-card,
        body.dark-mode .bento-card {
            background-color: #2a2a2a;
            border-color: #3a3a3a;
        }
        
        body.dark-mode .section-title {
            color: #f5f5f5;
        }
        
        body.dark-mode .text-black {
            color: #e5e5e5 !important;
        }
        
        body.dark-mode .text-gray-700 {
            color: #a0a0a0 !important;
        }
        
        body.dark-mode .text-gray-600 {
            color: #909090 !important;
        }
        
        body.dark-mode .text-gray-800 {
            color: #c0c0c0 !important;
        }
        
        body.dark-mode .bg-slate-50 {
            background-color: #2f2f2f !important;
        }
        
        body.dark-mode .bg-gray-50 {
            background-color: #2f2f2f !important;
        }
        
        body.dark-mode .bg-gray-100 {
            background-color: #333333 !important;
        }
        
        body.dark-mode .bg-purple-50 {
            background-color: #3d2940 !important;
        }
        
        body.dark-mode .bg-amber-50 {
            background-color: #3d3420 !important;
        }
        
        body.dark-mode .border-gray-200 {
            border-color: #3a3a3a !important;
        }
        
        body.dark-mode .border-purple-200 {
            border-color: #5a3a5f !important;
        }
        
        body.dark-mode .bg-blue-50 {
            background-color: #1e3a5f !important;
        }
        
        body.dark-mode .border-amber-400 {
            border-color: #d97706 !important;
        }
        
        /* 深色模式下的渐变遮罩 */
        body.dark-mode .content-preview.collapsed::after {
            background: linear-gradient(transparent, rgba(26, 26, 26, 0.95));
        }
        
        /* 深色模式下的加粗文字增强 */
        body.dark-mode b,
        body.dark-mode strong {
            color: #f5f5f5 !important;
            font-weight: 700;
            text-shadow: 0 0 0.5px rgba(255, 255, 255, 0.3);
        }
        
        /* 深色模式下的链接样式 */
        body.dark-mode a {
            color: #F9A8D4;
        }
        
        body.dark-mode a:hover {
            color: #FBCFE8;
        }
        
        /* 深色模式下的标签样式 */
        body.dark-mode .tag-item {
            background-color: rgba(236, 72, 153, 0.2);
            color: #F9A8D4;
        }
        
        /* 深色模式下的按钮文字 */
        body.dark-mode .text-pink-600 {
            color: #F9A8D4 !important;
        }
        
        body.dark-mode .text-pink-700 {
            color: #FBCFE8 !important;
        }
        
        body.dark-mode .text-green-700 {
            color: #86efac !important;
        }
        
        body.dark-mode .text-green-600 {
            color: #4ade80 !important;
        }
        
        /* 深色模式下的h标签 */
        body.dark-mode h1,
        body.dark-mode h2,
        body.dark-mode h3,
        body.dark-mode h4,
        body.dark-mode h5 {
            color: #f5f5f5 !important;
        }
        
        /* 深色模式下的边框和分隔线 */
        body.dark-mode .border-l-4 {
            opacity: 0.8;
        }
        
        /* 深色模式下复制按钮 */
        body.dark-mode .copy-btn {
            border-color: #F9A8D4;
            color: #F9A8D4;
        }
        
        body.dark-mode .copy-btn:hover {
            background: #F9A8D4;
            color: #1a1a1a;
        }
        
        /* 主题切换按钮 */
        .theme-toggle {
            position: fixed;
            bottom: 6rem;
            right: 2rem;
            width: 3rem;
            height: 3rem;
            background: #EC4899;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3);
            z-index: 1000;
        }
        
        .theme-toggle:hover {
            background: #DB2777;
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(236, 72, 153, 0.4);
        }
        
        /* 打印样式 */
        @media print {
            .back-to-top, .theme-toggle, nav, .copy-btn, .expand-btn, .toc-container {
                display: none !important;
            }
            
            body {
                background: white;
                color: black;
            }
            
            .bento-card {
                box-shadow: none;
                border: 1px solid #ddd;
                page-break-inside: avoid;
            }
            
            .content-preview.collapsed {
                max-height: none !important;
            }
            
            .content-preview.collapsed::after {
                display: none;
            }
        }
        
        /* 移动端优化 */
        @media (max-width: 640px) {
            .back-to-top {
                bottom: 1rem;
                right: 1rem;
                width: 2.5rem;
                height: 2.5rem;
            }
            
            .theme-toggle {
                bottom: 4.5rem;
                right: 1rem;
                width: 2.5rem;
                height: 2.5rem;
            }
            
            .toc-container {
                position: relative;
                top: 0;
                max-height: none;
            }
        }

        /* 页面淡入效果 - 让切换更平滑 */
        body {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

    </style>
</head>
<body class="bg-white text-black min-h-screen">
    <!-- HTML注释: 整体宽度通过 max-w-4xl 控制，实现日报宽度调小并保持响应式。-->
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6">

        <!-- === "群聊日报" 文件头区域 开始 === -->
        <!-- HTML注释: 此模块作为单独一行，占据整行宽度。包含日报主标题、报告日期和时间范围。 -->
        <!-- HTML注释: 新增了"群聊历史日报"链接，样式与整体设计保持统一协调 -->
        <header class="w-full mb-8" role="banner">
            <div class="bento-card p-8">
                <div class="text-center">
                    <h1 class="text-5xl font-black text-black mb-6">
                        自媒体糕校
                    </h1>
                    <div class="flex flex-col sm:flex-row justify-center items-center space-y-2 sm:space-y-0 sm:space-x-6 text-lg mb-4">
                        <div class="flex items-center text-gray-700">
                            <i class="fas fa-calendar-alt mr-2 text-[#4D6BFE]"></i>
                            <span id="report-date">2025年10月27日</span>
                        </div>
                        <div class="flex items-center text-gray-700">
                            <i class="fas fa-clock mr-2 text-[#4D6BFE]"></i>
                            <span>2025-10-27 08:36 - 2025-10-28 02:08</span>
                        </div>
                    </div>
                    <!-- 历史日报入口 -->
                    <div class="mt-4">
                        <a id="history-link" href="https://gaogaoselfmedialearninggroup.github.io/x/historical_page_summary.html" 
                           class="inline-flex items-center gap-2 text-pink-600 hover:text-pink-700 bg-pink-50 hover:bg-pink-100 border border-pink-200 hover:border-pink-300 px-4 py-2 rounded-lg transition-all text-sm font-medium shadow-sm hover:shadow">
                            <i class="fas fa-history"></i>
                            <span>糕校历史日报</span>
                        </a>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- 导航与历史入口 -->
        <nav class="w-full mb-8" aria-label="日期导航">
            <div class="bento-card p-5">
                <!-- 日期导航 -->
                <div class="flex items-center justify-between mb-4">
                    <button id="prev-day" class="inline-flex items-center gap-2 bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded-lg shadow disabled:bg-gray-200 disabled:text-gray-400 transition-all" aria-label="查看前一天日报">
                        <i class="fas fa-chevron-left"></i>
                        <span class="hidden sm:inline">上一天</span>
                        <span class="sm:hidden">上一天</span>
                    </button>
                    <button id="next-day" class="inline-flex items-center gap-2 bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded-lg shadow disabled:bg-gray-200 disabled:text-gray-400 transition-all" aria-label="查看后一天日报">
                        <span class="hidden sm:inline">下一天</span>
                        <span class="sm:hidden">下一天</span>
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </nav>
        <!-- === "群聊日报" 文件头区域 结束 === -->

        <!-- === 内容目录导航 开始 === -->
        <aside class="w-full mb-8">
            <div class="bento-card p-5 toc-container">
                <div class="toc-toggle flex items-center justify-between" onclick="toggleToc()">
                    <h3 class="text-lg font-bold text-black flex items-center">
                        <i class="fas fa-list mr-2 text-pink-500"></i>
                        <span>内容导航</span>
                    </h3>
                    <i id="toc-icon" class="fas fa-chevron-down text-pink-500 transition-transform"></i>
                </div>
                <nav class="toc-content" id="toc-content" aria-label="内容导航">
                    <div class="mt-4 space-y-1">
                        <a href="#section-overview" class="toc-link" onclick="smoothScroll(event, 'section-overview')">
                            <i class="fas fa-chart-line mr-2"></i>今日群聊速览
                        </a>
                        <a href="#section-topics" class="toc-link" onclick="smoothScroll(event, 'section-topics')">
                            <i class="fas fa-fire mr-2"></i>糕论时刻・深度话题
                        </a>
                        <a href="#section-qa" class="toc-link" onclick="smoothScroll(event, 'section-qa')">
                            <i class="fas fa-question-circle mr-2"></i>避坑指南・问答精选
                        </a>
                        <a href="#section-highlights" class="toc-link" onclick="smoothScroll(event, 'section-highlights')">
                            <i class="fas fa-star mr-2"></i>宝藏分享・高能精选
                        </a>
                    </div>
                </nav>
            </div>
        </aside>
        <!-- === 内容目录导航 结束 === -->

        <!-- === 模块一：总消息概览 开始 === -->
        <!-- HTML注释: 此模块作为单独一行，占据整行宽度。显示当日群聊总消息数量。 -->
        <section id="section-overview" class="w-full mb-12" aria-labelledby="section-overview-title">
            <h2 id="section-overview-title" class="section-title">
                一、今日群聊速览
            </h2>
            <div class="bento-card p-8 bg-gradient-to-br from-[#EC4899]/20 via-[#EC4899]/10 to-[#EC4899]/5 text-center rounded-2xl">
                <div class="number-display text-[#4D6BFE]">
                    584
                </div>
                <p class="text-xl font-semibold text-black mt-3">总消息数量</p>
            </div>
        </section>
        <!-- === 模块一：总消息概览 结束 === -->

        <!-- === 模块二：火花碰撞时刻・热点话题 开始 === -->
        <!-- HTML注释: 此模块作为单独一行，占据整行宽度。用于展示群内讨论的热点话题。 -->
        <section id="section-topics" class="w-full mb-12" aria-labelledby="section-topics-title">
            <h2 id="section-topics-title" class="section-title">
                二、糕论时刻・深度话题
            </h2>
            <!-- 列表容器: 讨论话题 -->
            <div class="space-y-8">

                <!-- 热点话题卡片 开始 -->
                <div class="bento-card p-6 rounded-xl"> 
                    <div class="flex flex-col sm:flex-row items-start justify-between mb-4">
                        <h4 class="text-xl font-bold text-black flex-1 mb-2 sm:mb-0">
                            后疫情时代的个人防疫哲学：在“绝对安全”与“生活品质”之间寻找平衡
                        </h4>
                        <span class="text-sm text-gray-600 ml-0 sm:ml-4 whitespace-nowrap bg-gray-100 px-3 py-1.5 rounded-md">
                            <i class="fas fa-clock mr-1.5 text-gray-500"></i>
                            15:46 - 19:05
                        </span>
                    </div>

                    <div class="mb-4 bg-purple-50 border border-purple-200 rounded-md p-3">
                        <p class="text-sm font-medium text-purple-700 mb-1">爬楼关键词</p>
                        <p class="text-sm text-purple-600 italic">
                            都行，都可以，都试试：我现在甚至怀疑是飞机那个鼻涕虫老头传染给我的
                        </p>
                    </div>

                    <div class="mb-5">
                        <p class="text-sm font-semibold text-gray-800 mb-2">相关关键词</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="tag-item">可持续防疫</span>
                            <span class="tag-item">概率思维</span>
                            <span class="tag-item">风险分级</span>
                            <span class="tag-item">防疫工具</span>
                            <span class="tag-item">心理健康</span>
                        </div>
                    </div>

                    <div class="mb-5">
                        <p class="text-sm font-semibold text-gray-800 mb-2">详细内容</p>
                        <div class="text-gray-700 text-base leading-relaxed bg-slate-50 p-4 rounded-md prose prose-sm max-w-none">
                            <div class="expandable-content" data-char-limit="200">
                                <div class="content-preview">
                                    <b>一、话题背景</b><br><b>都行，都可以，都试试</b>老师分享自己疑似在飞机上被感染的经历，引发了一场关于如何在后疫情时代进行有效且可持续个人防护的深度大讨论。<br><br><b>二、核心观点交锋</b><br>1. <b>风险分级，而非一刀切</b>：<b>狗狗蹲马桶</b>引用数据指出，不同场景的风险差异巨大（如高铁二等座CO2浓度远高于飞机和商务座），防疫措施应随之调整，而非在所有场景都采取最高规格防护。<br>2. <b>“怼脸吹”的玄学与科学</b>：便携式空气净化器（挂脖吹）成为讨论焦点。<b>昍</b>引用KOL“大鹅”的观点，认为其效果是“玄学”，因乱流不可控。而<b>狗狗蹲马桶</b>、<b>啊怿子 -</b>等人则认为，它能在特定场景（如就餐）显著降低感染概率，是一个有效的“减伤Buff”，而非“无敌护盾”。<br>3. <b>“可持续性”压倒“完美主义”</b>：<b>锋</b>、<b>狗狗蹲马桶</b>、<b>昍</b>等多位成员达成共识，防疫的终极目标是在保证生活质量的前提下，将感染频率降低到可接受的程度（如“一年不超过二阳”）。过度防疫导致焦虑和生活不便，是不可持续的。<br><br><b>三、结论与启发</b><br>本次讨论为群友们构建了一套成熟的个人防疫框架：以<b>戴好口罩为基石</b>，根据<b>场景风险（CO2浓度）</b>灵活增减防护措施（如挂脖吹、开窗通风），最终追求一种<b>保护身心健康、可持续的防疫生活方式</b>。关键在于接受概率，放弃对“绝对安全”的执念。
                                </div>
                                <button class="expand-btn text-[#4D6BFE] hover:text-blue-700 text-sm font-medium mt-2 flex items-center" style="display: none;">
                                    <span class="expand-text">展开全文</span>
                                    <i class="fas fa-chevron-down ml-1 expand-icon"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div>
                        <p class="text-sm font-semibold text-gray-800 mb-3">关键结论与金句时刻</p>
                        <div class="space-y-6">
                            <!-- 关键结论 1 开始 -->
                            <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                                <div class="mb-4">
                                    <h5 class="text-base font-semibold text-gray-800 mb-2">关键结论</h5>
                                    <div class="border-l-4 border-[#4D6BFE] pl-4 py-3 bg-blue-50 rounded-r-md">
                                        <p class="text-black text-base">
                                            有效的个人防疫是一场<b>概率游戏</b>，而非追求绝对的零风险。核心在于建立一套<b>可持续、分级的个人防护体系</b>，在保护健康和维持生活品质之间找到最佳平衡点。
                                        </p>
                                    </div>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-700 mb-2"><strong>金句时刻</strong></p>
                                    <div class="space-y-2">
                                        <div class="bg-amber-50 border-l-4 border-amber-400 p-3 rounded-r-md flex flex-col">
                                            <div class="flex items-start justify-between mb-2">
                                                <p class="text-gray-800 italic text-sm flex-1">
                                                    咱防疫归根结底是为了健康点活久点，生活质量好点；从开始就不活了那不是本末倒置。
                                                </p>
                                                <button class="copy-btn ml-2" onclick="copyQuote(this, '咱防疫归根结底是为了健康点活久点，生活质量好点；从开始就不活了那不是本末倒置。 - 可有可吴工头')" title="复制金句">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                            <p class="text-gray-600 text-xs mt-1 self-end">
                                                - <b>可有可吴工头</b>
                                            </p>
                                        </div>
                                        <div class="bg-amber-50 border-l-4 border-amber-400 p-3 rounded-r-md flex flex-col">
                                            <div class="flex items-start justify-between mb-2">
                                                <p class="text-gray-800 italic text-sm flex-1">
                                                    一年只要别二阳就是满分了。
                                                </p>
                                                <button class="copy-btn ml-2" onclick="copyQuote(this, '一年只要别二阳就是满分了。 - 昍')" title="复制金句">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                            <p class="text-gray-600 text-xs mt-1 self-end">
                                                - <b>昍</b>
                                            </p>
                                        </div>
                                        <div class="bg-amber-50 border-l-4 border-amber-400 p-3 rounded-r-md flex flex-col">
                                            <div class="flex items-start justify-between mb-2">
                                                <p class="text-gray-800 italic text-sm flex-1">
                                                    对防疫没有焦虑, 因为预期就是降低生病的概率...就算真的生病了也不会破防。
                                                </p>
                                                <button class="copy-btn ml-2" onclick="copyQuote(this, '对防疫没有焦虑, 因为预期就是降低生病的概率...就算真的生病了也不会破防。 - 锋')" title="复制金句">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                            <p class="text-gray-600 text-xs mt-1 self-end">
                                                - <b>锋</b>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- 关键结论 1 结束 -->
                        </div>
                    </div>
                </div>
                <!-- 热点话题卡片 结束 -->

            </div>
            <!-- 列表容器结束: 讨论话题 -->
        </section>
        <!-- === 模块二：火花碰撞时刻・热点话题 结束 === -->

        <!-- === 模块三：解惑一点通・有问必答 开始 === -->
        <section id="section-qa" class="w-full mb-12" aria-labelledby="section-qa-title">
            <h2 id="section-qa-title" class="section-title">
                三、避坑指南・问答精选
            </h2>
            <!-- 列表容器: 问题解答条目 -->
            <div class="space-y-8">
                <!-- 问答卡片 开始 -->
                <div class="bento-card p-6 rounded-xl border-l-4 border-[#93c5fd]"> 
                    <div class="mb-4">
                        <h4 class="text-xl font-semibold text-black flex items-center">
                            <i class="fas fa-question-circle mr-2.5 text-[#4D6BFE] text-lg"></i>
                            提问：刚起步的知识付费咨询，如何定价才能既不“贱卖”自己，又能顺利开张？
                        </h4>
                    </div>

                    <div class="mb-4 bg-purple-50 border border-purple-200 rounded-md p-3">
                        <p class="text-sm font-medium text-purple-700 mb-1">爬楼关键词</p>
                        <p class="text-sm text-purple-600 italic">
                            高大壮：就这种问题 我完全不知道该怎么做内容分层
                        </p>
                    </div>

                    <div class="border-t border-gray-200 pt-4">
                        <h5 class="text-lg font-semibold text-green-700 flex items-center mb-2">
                            <i class="fas fa-lightbulb mr-2.5 text-lg text-green-600"></i>
                            解答
                        </h5>
                        <div class="text-gray-700 text-base leading-relaxed prose prose-sm max-w-none">
                            <div class="expandable-content" data-char-limit="200">
                                <div class="content-preview">
                                    <b>一、问题背景</b><br><b>高大壮</b>老师准备开展育儿咨询服务，面对自己的专业知识和经验，却在如何迈出“收费第一步”上感到困惑，担心定价太低对不起内容，定价太高无人问津。<br><br><b>二、核心原因分析</b><br>新手咨询师的核心痛点不是盈利，而是<b>缺乏市场验证和成功案例</b>。过高的定价会增加用户的决策门槛，也给自己带来不必要的履约压力。<br><br><b>三、解决方案与建议</b><br>1. <b>采用“试吃价”策略</b>：<b>转念之间</b>和<b>都行，都可以，都试试</b>建议，首单或前几单可以采用极低的“开业酬宾价”（如9.9元），<b>转念之间</b>金句点醒：“<b>第一单9.9，第二单可就不是了</b>”。<br>2. <b>转变心态，积累经验</b>：此阶段的核心目标是<b>跑通服务流程、积累实战经验和收集正面反馈</b>。低价可以看作是获取这些宝贵资产的成本。<br>3. <b>让市场决定价格</b>：<b>都行，都可以，都试试</b>指出，“<b>收少了你下次自然会想办法怎么多收</b>”。通过实践，自然会找到产品价值和市场接受度的平衡点。
                                </div>
                                <button class="expand-btn text-[#4D6BFE] hover:text-blue-700 text-sm font-medium mt-2 flex items-center" style="display: none;">
                                    <span class="expand-text">展开全文</span>
                                    <i class="fas fa-chevron-down ml-1 expand-icon"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="mt-5 pt-4 border-t border-gray-200">
                        <div class="flex flex-wrap gap-2">
                            <span class="tag-item">知识付费</span>
                            <span class="tag-item">定价策略</span>
                            <span class="tag-item">咨询服务</span>
                            <span class="tag-item">冷启动</span>
                            <span class="tag-item">价值验证</span>
                        </div>
                    </div>
                </div>
                <!-- 问答卡片 结束 -->
                
                <!-- 问答卡片 开始 -->
                <div class="bento-card p-6 rounded-xl border-l-4 border-[#93c5fd]"> 
                    <div class="mb-4">
                        <h4 class="text-xl font-semibold text-black flex items-center">
                            <i class="fas fa-question-circle mr-2.5 text-[#4D6BFE] text-lg"></i>
                            提问：求助：8个月宝宝必须被大人抱着坐着才能睡，已持续5个月，如何破解？
                        </h4>
                    </div>

                    <div class="mb-4 bg-purple-50 border border-purple-200 rounded-md p-3">
                        <p class="text-sm font-medium text-purple-700 mb-1">爬楼关键词</p>
                        <p class="text-sm text-purple-600 italic">
                            高大壮：我刚问了下抱睡的意思
                        </p>
                    </div>

                    <div class="border-t border-gray-200 pt-4">
                        <h5 class="text-lg font-semibold text-green-700 flex items-center mb-2">
                            <i class="fas fa-lightbulb mr-2.5 text-lg text-green-600"></i>
                            解答
                        </h5>
                        <div class="text-gray-700 text-base leading-relaxed prose prose-sm max-w-none">
                            <div class="expandable-content" data-char-limit="200">
                                <div class="content-preview">
                                    <b>一、问题背景</b><br><b>高大壮</b>老师的首位咨询客户面临一个极端育儿难题：宝宝从3个月大开始，养成了必须由大人抱着、且大人必须坐着才能长时间睡觉的习惯，一放下就醒，导致家庭成员身心俱疲。<br><br><b>二、核心原因分析</b><br><b>阿南</b>一针见血地指出，这很可能是“落地响”的极端版本，其根本原因是<b>家长在早期不经意间建立并强化了这种“抱睡”的反馈模式</b>。这不是孩子的生理需求，而是一种被后天培养出的行为依赖。<br><br><b>三、解决方案与建议</b><br>虽然群内未给出完整方案，但指明了方向：<br>1. <b>修正认知是第一步</b>：家长首先要认识到这是个行为习惯问题，而非孩子“天生如此”，才有可能去解决。<br>2. <b>干预核心是“家长”</b>：<b>高大壮</b>的思路点明了关键——“<b>先看看这人的接受程度</b>”，再考虑“<b>解决她自己的问题</b>”。这意味着解决方案的重点在于指导和支持家长，帮助她们有策略、有信心地打破旧的依赖循环，建立新的自主睡眠习惯。这是一个需要耐心和方法的“戒断”过程。
                                </div>
                                <button class="expand-btn text-[#4D6BFE] hover:text-blue-700 text-sm font-medium mt-2 flex items-center" style="display: none;">
                                    <span class="expand-text">展开全文</span>
                                    <i class="fas fa-chevron-down ml-1 expand-icon"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="mt-5 pt-4 border-t border-gray-200">
                        <div class="flex flex-wrap gap-2">
                            <span class="tag-item">育儿难题</span>
                            <span class="tag-item">睡眠训练</span>
                            <span class="tag-item">行为习惯</span>
                            <span class="tag-item">抱睡</span>
                            <span class="tag-item">落地响</span>
                        </div>
                    </div>
                </div>
                <!-- 问答卡片 结束 -->
            </div>
            <!-- 列表容器结束: 问题解答条目 -->
        </section>
        <!-- === 模块三：解惑一点通・有问必答 结束 === -->

        <!-- === 模块四：智慧火花匣・每日精选 开始 === -->
        <section id="section-highlights" class="w-full mb-12" aria-labelledby="section-highlights-title">
            <h2 id="section-highlights-title" class="section-title">
                四、宝藏分享・高能精选
            </h2>
            <!-- 列表容器: 每日精选条目 -->
            <div class="space-y-8">
                <!-- 知识卡片 开始 -->
                <div class="bento-card p-6 rounded-xl border-l-4 border-[#93c5fd]">
                    <h4 class="text-xl font-semibold text-black mb-3">
                        个人可持续防疫工具箱：从口罩到空气监测
                    </h4>

                    <div class="mb-4 bg-purple-50 border border-purple-200 rounded-md p-3">
                        <p class="text-sm font-medium text-purple-700 mb-1">爬楼关键词</p>
                        <p class="text-sm text-purple-600 italic">
                            狗狗蹲马桶：二氧化碳浓度从高到底排序：
                        </p>
                    </div>

                    <div class="text-gray-700 text-base mb-4 leading-relaxed prose prose-sm max-w-none">
                        <div class="expandable-content" data-char-limit="200">
                            <div class="content-preview">
                                <b>一、推荐内容</b><br>围绕“可持续防疫”的理念，群友们分享并评估了一系列实用防护工具。<br><br><b>二、核心价值与特点</b><br>1. <b>基础防护（金标准）</b>：高质量、高贴合度的<b>KN95口罩</b>（如支米、AKKAIR）是不可替代的核心防线。讨论深入到耳戴式与头戴式的优劣，以及使用S扣提高密合度的技巧。<br>2. <b>场景辅助（风险缓冲）</b>：<b>便携式空气净化器（挂脖吹）</b>，适用于就餐等必须摘口罩的短时高风险场景，作为概率上的“减伤”工具。<br>3. <b>环境监测（风险“可视化”）</b>：<b>二氧化碳检测仪</b>。<b>狗狗蹲马桶</b>分享关键知识点：CO2浓度是衡量室内通风情况和病毒传播风险的重要指标，保持在600-800ppm以下能极大降低风险。<br>4. <b>善后消毒</b>：<b>紫外线消毒箱</b>用于口罩和随身物品的循环使用与消毒；<b>次氯酸消毒液</b>用于环境和衣物表面消毒。<br>5. <b>健康支持</b>：<b>雾化器</b>配合生理盐水，由<b>宇世无争</b>老师推荐，用于缓解呼吸道不适症状。<br><br><b>三、适用场景</b><br>这套工具箱适用于所有希望在不影响正常生活节奏的前提下，科学、有效地降低感染风险的个人和家庭。
                            </div>
                            <button class="expand-btn text-[#4D6BFE] hover:text-blue-700 text-sm font-medium mt-2 flex items-center" style="display: none;">
                                <span class="expand-text">展开全文</span>
                                <i class="fas fa-chevron-down ml-1 expand-icon"></i>
                            </button>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="tag-item">防疫工具</span>
                        <span class="tag-item">KN95口罩</span>
                        <span class="tag-item">空气净化</span>
                        <span class="tag-item">CO2监测</span>
                        <span class="tag-item">个人防护</span>
                    </div>
                </div>
                <!-- 知识卡片 结束 -->

                <!-- 知识卡片 开始 -->
                <div class="bento-card p-6 rounded-xl border-l-4 border-[#93c5fd]">
                    <h4 class="text-xl font-semibold text-black mb-3">
                        黄金首饰消费新逻辑：从“保值”到“情绪价值”的迭代
                    </h4>

                    <div class="mb-4 bg-purple-50 border border-purple-200 rounded-md p-3">
                        <p class="text-sm font-medium text-purple-700 mb-1">爬楼关键词</p>
                        <p class="text-sm text-purple-600 italic">
                            转念之间：昨天老铺黄金又涨价了，前几天珠宝群的姐姐们开始狂买
                        </p>
                    </div>

                    <div class="text-gray-700 text-base mb-4 leading-relaxed prose prose-sm max-w-none">
                        <div class="expandable-content" data-char-limit="200">
                            <div class="content-preview">
                                <b>一、推荐内容</b><br>群内关于黄金消费的讨论，揭示了当代消费者对黄金饰品价值认知的深刻变迁。<br><br><b>二、核心价值与特点</b><br>1. <b>现象观察</b>：<b>转念之间</b>和<b>都行，都可以，都试试</b>观察到一种流行行为：卖掉旧款黄金首饰，再添钱购买周大福、老铺黄金等品牌的新款。<br>2. <b>价值剖析</b>：<b>昍</b>给出了精辟类比——“<b>和二手手机卖了换个新的好像也差不多</b>”。这一行为的核心驱动力，已从传统的“保值增值”转向了对<b>设计、品牌、社交属性和情绪满足</b>的追求。黄金首饰正在“消费电子化”，新款式、新工艺带来的“体验升级”成为关键。<br>3. <b>品牌分层</b>：<b>转念之间</b>作为行家，点出了品牌鄙视链。<b>老铺黄金</b>是营销驱动的流量王者，而<b>琳朝</b>、<b>君佩</b>等品牌则在工艺和技术上更胜一筹，代表了更深度的品味。<br><br><b>三、适用场景</b><br>该洞察适用于理解所有高价值、具有保值属性的消费品类。对于自媒体创作者而言，这揭示了在产品之上，<b>品牌故事、情绪价值和社交认同</b>是撬动高端消费市场的关键杠杆。
                            </div>
                            <button class="expand-btn text-[#4D6BFE] hover:text-blue-700 text-sm font-medium mt-2 flex items-center" style="display: none;">
                                <span class="expand-text">展开全文</span>
                                <i class="fas fa-chevron-down ml-1 expand-icon"></i>
                            </button>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-2">
                        <span class="tag-item">消费心理</span>
                        <span class="tag-item">黄金首饰</span>
                        <span class="tag-item">品牌营销</span>
                        <span class="tag-item">情绪价值</span>
                        <span class="tag-item">奢侈品</span>
                    </div>
                </div>
                <!-- 知识卡片 结束 -->

            </div>
            <!-- 列表容器结束: 每日精选条目 -->
        </section>
        <!-- === 模块四：智慧火花匣・每日精选 结束 === -->

        <!-- 底部日期导航 -->
        <nav class="w-full mt-12" aria-label="日期导航（底部）">
            <div class="bento-card p-5">
                <div class="flex items-center justify-between mb-4">
                    <button id="prev-day-bottom" class="inline-flex items-center gap-2 bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded-lg shadow disabled:bg-gray-200 disabled:text-gray-400 transition-all" aria-label="查看前一天日报">
                        <i class="fas fa-chevron-left"></i>
                        <span class="hidden sm:inline">上一天</span>
                        <span class="sm:hidden">上一天</span>
                    </button>
                    <button id="next-day-bottom" class="inline-flex items-center gap-2 bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded-lg shadow disabled:bg-gray-200 disabled:text-gray-400 transition-all" aria-label="查看后一天日报">
                        <span class="hidden sm:inline">下一天</span>
                        <span class="sm:hidden">下一天</span>
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </nav>

        <!-- === 文件底部 开始 === -->

        <footer class="w-full mt-16" role="contentinfo">
            <div class="bento-card p-8">
                <div class="text-center text-gray-700 space-y-3">
                    <div class="flex flex-col sm:flex-row justify-center items-center space-y-2 sm:space-y-0 sm:space-x-6 text-base">
                        <div class="flex items-center">
                            <i class="fas fa-database mr-2 text-[#4D6BFE]"></i>
                            <span>微信群聊记录 - 自媒体糕糕学习群</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-robot mr-2 text-[#4D6BFE]"></i>
                            <span>报告生成于 2025-10-28 09:00:00</span>
                        </div>
                    </div>
                    <p class="text-sm text-gray-500 max-w-2xl mx-auto leading-relaxed">
                        本报告基于群聊数据自动生成，仅供参考。内容可能包含个人观点，不代表群组官方立场。数据处理过程中已尽量匿名化处理敏感信息。
                    </p>
                </div>
            </div>
        </footer>
        <!-- === 文件底部 结束 === -->
    </div>

    <!-- 返回顶部按钮 -->
    <button class="back-to-top" id="backToTop" aria-label="返回顶部" title="返回顶部">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- 主题切换按钮 -->
    <button class="theme-toggle" id="themeToggle" aria-label="切换主题" title="切换深色/浅色模式">
        <i class="fas fa-moon" id="themeIcon"></i>
    </button>

    <script>
        // 自媒体糕校日报：历史汇总与导航（新增）
        const GJ_BASE_URL = 'https://gaogaoselfmedialearninggroup.github.io/x';
        // 动态路径前缀兼容：根目录 或 子目录 gaos_daily_report/
        const GJ_DIR = window.location.pathname.includes('gaos_daily_report/') ? 'gaos_daily_report/' : '';
        const GJ_FILE_PREFIX = 'daily_report_';
        const GJ_SUFFIX = '.html';
        // 本地文件浏览回退范围（仅在 file:// 下生效）
        const GJ_LOCAL_MIN = '2025-09-23';
        const GJ_LOCAL_MAX = '2025-09-29';


        // 页面加载时滚动到顶部（避免保留上一页的滚动位置）
        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }
        window.scrollTo(0, 0);
        

        document.addEventListener('DOMContentLoaded', function() {
            // 初始化所有新功能
            initBackToTop();
            initThemeToggle();
            initTocHighlight();
            
            // Bento card hover effect is handled by CSS :hover pseudo-class

            // Number animation effect
            const numberElements = document.querySelectorAll('.number-display');
            numberElements.forEach(element => {
                const finalValueText = element.textContent.replace(/,/g, '');
                const finalValue = parseInt(finalValueText, 10);

                if (isNaN(finalValue)) return;

                let currentValue = 0;
                const duration = 1500; // Animation duration in ms
                const frameRate = 1000 / 60; // 60fps
                const totalFrames = Math.round(duration / frameRate);
                const increment = finalValue / totalFrames;

                let currentFrame = 0;
                const timer = setInterval(() => {
                    currentFrame++;
                    currentValue += increment;

                    if (currentFrame >= totalFrames) {
                        currentValue = finalValue;
                        clearInterval(timer);
                    }
                    // Format number with commas for display
                    element.textContent = Math.floor(currentValue).toLocaleString('en-US');
                }, frameRate);
            });


            // HTML注释: 初始化展开功能
            initExpandableContent();
            
            // 初始化日报导航
            try {
                initDailyNavigation();
            } catch (e) {
                console.warn('初始化导航失败', e);
            }
        });

        function initDailyNavigation() {
            const currentDateStr = getCurrentDateFromPage();
            if (!currentDateStr) return;

            const dt = new Date(currentDateStr);
            const prev = new Date(dt); prev.setDate(prev.getDate() - 1);
            const next = new Date(dt); next.setDate(next.getDate() + 1);

            const prevStr = formatDate(prev);
            const nextStr = formatDate(next);

            const prevButtons = ['prev-day', 'prev-day-bottom']
                .map(id => document.getElementById(id))
                .filter(Boolean);
            const nextButtons = ['next-day', 'next-day-bottom']
                .map(id => document.getElementById(id))
                .filter(Boolean);

            if (!prevButtons.length && !nextButtons.length) {
                return;
            }

            const updateButtons = (buttons, enabled, handler) => {
                buttons.forEach(btn => {
                    btn.disabled = !enabled;
                    btn.onclick = enabled ? handler : null;
                });
            };

            const isLocalFile = window.location.protocol === 'file:';

            if (isLocalFile) {
                const prevHandler = () => {
                    const [year, month] = prevStr.split('-');
                    window.location.href = `../${month}/${GJ_FILE_PREFIX}${prevStr}${GJ_SUFFIX}`;
                };
                const nextHandler = () => {
                    const [year, month] = nextStr.split('-');
                    window.location.href = `../${month}/${GJ_FILE_PREFIX}${nextStr}${GJ_SUFFIX}`;
                };

                if (prevButtons.length) {
                    updateButtons(prevButtons, true, prevHandler);
                }
                if (nextButtons.length) {
                    updateButtons(nextButtons, true, nextHandler);
                }
            } else {
                /* GitHub Pages mode: use fetch to check file availability */
                Promise.all([checkExists(prevStr), checkExists(nextStr)])
                    .then(([pe, ne]) => {
                        const prevHandler = () => window.location.href = pe.url;
                        const nextHandler = () => window.location.href = ne.url;

                        updateButtons(prevButtons, !!pe.ok, prevHandler);
                        updateButtons(nextButtons, !!ne.ok, nextHandler);
                    })
                    .catch(() => {
                        updateButtons(prevButtons, false, null);
                        updateButtons(nextButtons, false, null);
                    });
            }
        }

        function checkExists(dateStr) {
            // 从日期字符串中提取年月 (格式: YYYY-MM-DD)
            const [year, month] = dateStr.split('-');
            
            // 新的层级目录结构: gaos_daily_report/YYYY/MM/daily_report_YYYY-MM-DD.html
            const url = `${GJ_BASE_URL}/${year}/${month}/${GJ_FILE_PREFIX}${dateStr}${GJ_SUFFIX}`;
            
            return fetch(url, { method: 'HEAD', cache: 'no-store' })
                .then(r => r.ok ? { ok: true, url: url } : 
                    fetch(url, { method: 'GET', cache: 'no-store' })
                        .then(r2 => r2.ok ? { ok: true, url: url } : { ok: false })
                )
                .catch(() => ({ ok: false }));
        }

        function getCurrentDateFromPage() {
            // 1) 从报告日期
            const el = document.getElementById('report-date');
            if (el) {
                const m = el.textContent.match(/(\d{4})年(\d{1,2})月(\d{1,2})日/);
                if (m) return `${m[1]}-${m[2].padStart(2,'0')}-${m[3].padStart(2,'0')}`;
            }
            // 2) 从 URL 文件名
            const fn = window.location.pathname.match(/daily_report_(\d{4}-\d{2}-\d{2})\.html/);
            if (fn) return fn[1];
            // 3) 从标题
            const tm = document.title.match(/(\d{4}-\d{2}-\d{2})/);
            if (tm) return tm[1];
            return null;
        }

        function formatDate(d) {
            const y = d.getFullYear();
            const m = String(d.getMonth()+1).padStart(2,'0');
            const dd = String(d.getDate()).padStart(2,'0');
            return `${y}-${m}-${dd}`;
        }

        // === 新增功能函数 ===
        
        // 目录展开/收起
        function toggleToc() {
            const content = document.getElementById('toc-content');
            const icon = document.getElementById('toc-icon');
            content.classList.toggle('active');
            icon.style.transform = content.classList.contains('active') ? 'rotate(180deg)' : 'rotate(0deg)';
        }
        
        // 平滑滚动
        function smoothScroll(event, targetId) {
            event.preventDefault();
            const target = document.getElementById(targetId);
            if (target) {
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                // 更新目录激活状态
                document.querySelectorAll('.toc-link').forEach(link => link.classList.remove('active'));
                event.currentTarget.classList.add('active');
            }
        }
        
        // 返回顶部功能
        function initBackToTop() {
            const btn = document.getElementById('backToTop');
            
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    btn.classList.add('visible');
                } else {
                    btn.classList.remove('visible');
                }
            });
            
            btn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }
        
        // 主题切换功能
        function initThemeToggle() {
            const btn = document.getElementById('themeToggle');
            const icon = document.getElementById('themeIcon');
            
            // 将预加载类转换为正式的dark-mode类
            document.documentElement.classList.remove('dark-mode-preload');
            
            // 检查本地存储的主题设置
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            }
            
            btn.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                const isDark = document.body.classList.contains('dark-mode');
                
                if (isDark) {
                    icon.classList.remove('fa-moon');
                    icon.classList.add('fa-sun');
                    localStorage.setItem('theme', 'dark');
                } else {
                    icon.classList.remove('fa-sun');
                    icon.classList.add('fa-moon');
                    localStorage.setItem('theme', 'light');
                }
            });
        }
        
        // 目录高亮功能（滚动时自动高亮当前章节）
        function initTocHighlight() {
            const sections = ['section-overview', 'section-topics', 'section-qa', 'section-highlights'];
            const tocLinks = document.querySelectorAll('.toc-link');
            
            window.addEventListener('scroll', () => {
                let current = '';
                
                sections.forEach(sectionId => {
                    const section = document.getElementById(sectionId);
                    if (section) {
                        const sectionTop = section.offsetTop;
                        const sectionHeight = section.clientHeight;
                        if (window.pageYOffset >= sectionTop - 100) {
                            current = sectionId;
                        }
                    }
                });
                
                tocLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === '#' + current) {
                        link.classList.add('active');
                    }
                });
            });
        }
        
        // 复制金句功能
        function copyQuote(button, text) {
            navigator.clipboard.writeText(text).then(() => {
                const icon = button.querySelector('i');
                const originalClass = icon.className;
                
                // 更改按钮状态
                button.classList.add('copied');
                icon.className = 'fas fa-check';
                
                // 2秒后恢复
                setTimeout(() => {
                    button.classList.remove('copied');
                    icon.className = originalClass;
                }, 2000);
            }).catch(err => {
                console.error('复制失败:', err);
                alert('复制失败，请手动复制');
            });
        }
        
        // HTML注释: 初始化展开功能
        function initExpandableContent() {
            const expandableContents = document.querySelectorAll('.expandable-content');
            
            expandableContents.forEach(container => {
                const charLimit = parseInt(container.getAttribute('data-char-limit')) || 200;
                const contentPreview = container.querySelector('.content-preview');
                const expandBtn = container.querySelector('.expand-btn');
                
                if (!contentPreview || !expandBtn) return;
                
                const fullContent = contentPreview.innerHTML;
                const fullText = contentPreview.textContent || contentPreview.innerText;
                
                // HTML注释: 如果内容长度超过限制，则显示展开按钮
                if (fullText.length > charLimit) {
                    // HTML注释: 创建一个临时元素来正确截取HTML内容
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = fullContent;
                    
                    // HTML注释: 截取文本内容到指定长度
                    const truncatedText = fullText.substring(0, charLimit);
                    
                    // HTML注释: 使用更简单可靠的方法截取内容
                    let truncatedContent = '';
                    let charCount = 0;
                    
                    // HTML注释: 逐字符遍历，保持简单的HTML结构
                    const walker = document.createTreeWalker(
                        tempDiv,
                        NodeFilter.SHOW_TEXT,
                        null,
                        false
                    );
                    
                    let node;
                    const textNodes = [];
                    while (node = walker.nextNode()) {
                        textNodes.push(node);
                    }
                    
                    // HTML注释: 计算需要保留的文本内容
                    for (let textNode of textNodes) {
                        const text = textNode.textContent;
                        if (charCount + text.length <= charLimit) {
                            charCount += text.length;
                        } else {
                            const remainingChars = charLimit - charCount;
                            textNode.textContent = text.substring(0, remainingChars) + '...';
                            charCount = charLimit;
                            
                            // HTML注释: 新的、更干净的移除后续所有节点的逻辑
                            let currentNodeToClearAfter = textNode;
                            while (currentNodeToClearAfter && currentNodeToClearAfter !== tempDiv) {
                                let sibling = currentNodeToClearAfter.nextSibling;
                                while (sibling) {
                                    const nodeToRemove = sibling;
                                    sibling = sibling.nextSibling;
                                    nodeToRemove.remove();
                                }
                                currentNodeToClearAfter = currentNodeToClearAfter.parentElement;
                            }
                            break; // 完成截断和清理，跳出 textNodes 循环
                        }
                    }
                    
                    const previewContent = tempDiv.innerHTML;
                    
                    contentPreview.innerHTML = previewContent;
                    contentPreview.classList.add('collapsed');
                    expandBtn.style.display = 'flex';
                    
                    // HTML注释: 绑定展开/收起事件
                    expandBtn.addEventListener('click', function() {
                        const isExpanded = expandBtn.classList.contains('expanded');
                        
                        if (isExpanded) {
                            // HTML注释: 收起内容
                            contentPreview.innerHTML = previewContent;
                            contentPreview.classList.add('collapsed');
                            expandBtn.querySelector('.expand-text').textContent = '展开全文';
                            expandBtn.classList.remove('expanded');
                        } else {
                            // HTML注释: 展开内容
                            contentPreview.innerHTML = fullContent;
                            contentPreview.classList.remove('collapsed');
                            expandBtn.querySelector('.expand-text').textContent = '收起';
                            expandBtn.classList.add('expanded');
                        }
                    });
                } else {
                    // HTML注释: 内容较短，隐藏展开按钮
                    expandBtn.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>